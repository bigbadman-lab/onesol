{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":44,"index":44}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-secure-store","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":45},"end":{"line":2,"column":49,"index":94}}],"key":"BU2XtfznZ4PiVldqd/oueHCCaLo=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      n[k] = e[k];\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return useDeviceId;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _react = require(_dependencyMap[2], \"react\");\n  var _expoSecureStore = require(_dependencyMap[3], \"expo-secure-store\");\n  var SecureStore = _interopNamespace(_expoSecureStore);\n  var DEVICE_ID_KEY = \"device_uuid\";\n  var CONSENT_KEY = \"user_consent_given\";\n  function generateUUID() {\n    return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n      var r = Math.random() * 16 | 0;\n      var v = c === \"x\" ? r : r & 0x3 | 0x8;\n      return v.toString(16);\n    });\n  }\n  function useDeviceId() {\n    _s();\n    var _useState = (0, _react.useState)(null),\n      _useState2 = (0, _slicedToArray.default)(_useState, 2),\n      deviceId = _useState2[0],\n      setDeviceId = _useState2[1];\n    var _useState3 = (0, _react.useState)(true),\n      _useState4 = (0, _slicedToArray.default)(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n    (0, _react.useEffect)(() => {\n      function loadOrCreateDeviceId() {\n        return _loadOrCreateDeviceId.apply(this, arguments);\n      }\n      function _loadOrCreateDeviceId() {\n        _loadOrCreateDeviceId = (0, _asyncToGenerator.default)(function* () {\n          try {\n            // First check if user has given consent\n            var consent = yield SecureStore.getItemAsync(CONSENT_KEY);\n            if (consent !== \"true\") {\n              // No consent given, don't generate or load ID\n              setDeviceId(null);\n              setLoading(false);\n              return;\n            }\n\n            // Consent given, proceed with loading or creating ID\n            var id = yield SecureStore.getItemAsync(DEVICE_ID_KEY);\n            if (!id) {\n              id = generateUUID();\n              yield SecureStore.setItemAsync(DEVICE_ID_KEY, id);\n            }\n            setDeviceId(id);\n          } catch (error) {\n            console.error(\"Error loading device ID:\", error);\n            // Fallback to memory-only UUID if SecureStore fails (only if consent given)\n            var _consent = yield SecureStore.getItemAsync(CONSENT_KEY);\n            if (_consent === \"true\") {\n              setDeviceId(generateUUID());\n            }\n          } finally {\n            setLoading(false);\n          }\n        });\n        return _loadOrCreateDeviceId.apply(this, arguments);\n      }\n      loadOrCreateDeviceId();\n    }, []);\n    return {\n      deviceId,\n      loading\n    };\n  }\n  _s(useDeviceId, \"cqE76sYHKziLBNfGiDNHWi6miCo=\");\n});","lineCount":98,"map":[[22,2,15,15,"Object"],[22,8,15,15],[22,9,15,15,"defineProperty"],[22,23,15,15],[22,24,15,15,"exports"],[22,31,15,15],[23,4,15,15,"enumerable"],[23,14,15,15],[24,4,15,15,"get"],[24,7,15,15],[24,18,15,15,"get"],[24,19,15,15],[25,6,15,15],[25,13,15,15,"useDeviceId"],[25,24,15,15],[26,4,15,15],[27,2,15,15],[28,2,57,1],[28,6,57,1,"_babelRuntimeHelpersAsyncToGenerator"],[28,42,57,1],[28,45,57,1,"require"],[28,52,57,1],[28,53,57,1,"_dependencyMap"],[28,67,57,1],[29,2,57,1],[29,6,57,1,"_asyncToGenerator"],[29,23,57,1],[29,26,57,1,"_interopDefault"],[29,41,57,1],[29,42,57,1,"_babelRuntimeHelpersAsyncToGenerator"],[29,78,57,1],[30,2,57,1],[30,6,57,1,"_babelRuntimeHelpersSlicedToArray"],[30,39,57,1],[30,42,57,1,"require"],[30,49,57,1],[30,50,57,1,"_dependencyMap"],[30,64,57,1],[31,2,57,1],[31,6,57,1,"_slicedToArray"],[31,20,57,1],[31,23,57,1,"_interopDefault"],[31,38,57,1],[31,39,57,1,"_babelRuntimeHelpersSlicedToArray"],[31,72,57,1],[32,2,1,0],[32,6,1,0,"_react"],[32,12,1,0],[32,15,1,0,"require"],[32,22,1,0],[32,23,1,0,"_dependencyMap"],[32,37,1,0],[33,2,2,0],[33,6,2,0,"_expoSecureStore"],[33,22,2,0],[33,25,2,0,"require"],[33,32,2,0],[33,33,2,0,"_dependencyMap"],[33,47,2,0],[34,2,2,0],[34,6,2,0,"SecureStore"],[34,17,2,0],[34,20,2,0,"_interopNamespace"],[34,37,2,0],[34,38,2,0,"_expoSecureStore"],[34,54,2,0],[35,2,4,0],[35,6,4,6,"DEVICE_ID_KEY"],[35,19,4,19],[35,22,4,22],[35,35,4,35],[36,2,5,0],[36,6,5,6,"CONSENT_KEY"],[36,17,5,17],[36,20,5,20],[36,40,5,40],[37,2,7,0],[37,11,7,9,"generateUUID"],[37,23,7,21,"generateUUID"],[37,24,7,21],[37,26,7,24],[38,4,8,2],[38,11,8,9],[38,49,8,47],[38,50,8,48,"replace"],[38,57,8,55],[38,58,8,56],[38,65,8,63],[38,67,8,65],[38,77,8,75,"c"],[38,78,8,76],[38,80,8,78],[39,6,9,4],[39,10,9,10,"r"],[39,11,9,11],[39,14,9,15,"Math"],[39,18,9,19],[39,19,9,20,"random"],[39,25,9,26],[39,26,9,27],[39,27,9,28],[39,30,9,31],[39,32,9,33],[39,35,9,37],[39,36,9,38],[40,6,10,4],[40,10,10,10,"v"],[40,11,10,11],[40,14,10,14,"c"],[40,15,10,15],[40,20,10,20],[40,23,10,23],[40,26,10,26,"r"],[40,27,10,27],[40,30,10,31,"r"],[40,31,10,32],[40,34,10,35],[40,37,10,38],[40,40,10,42],[40,43,10,45],[41,6,11,4],[41,13,11,11,"v"],[41,14,11,12],[41,15,11,13,"toString"],[41,23,11,21],[41,24,11,22],[41,26,11,24],[41,27,11,25],[42,4,12,2],[42,5,12,3],[42,6,12,4],[43,2,13,0],[44,2,15,15],[44,11,15,24,"useDeviceId"],[44,22,15,35,"useDeviceId"],[44,23,15,35],[44,25,15,38],[45,4,15,38,"_s"],[45,6,15,38],[46,4,16,2],[46,8,16,2,"_useState"],[46,17,16,2],[46,20,16,34],[46,24,16,34,"useState"],[46,30,16,42],[46,31,16,42,"useState"],[46,39,16,42],[46,41,16,43],[46,45,16,47],[46,46,16,48],[47,6,16,48,"_useState2"],[47,16,16,48],[47,23,16,48,"_slicedToArray"],[47,37,16,48],[47,38,16,48,"default"],[47,45,16,48],[47,47,16,48,"_useState"],[47,56,16,48],[48,6,16,9,"deviceId"],[48,14,16,17],[48,17,16,17,"_useState2"],[48,27,16,17],[49,6,16,19,"setDeviceId"],[49,17,16,30],[49,20,16,30,"_useState2"],[49,30,16,30],[50,4,17,2],[50,8,17,2,"_useState3"],[50,18,17,2],[50,21,17,32],[50,25,17,32,"useState"],[50,31,17,40],[50,32,17,40,"useState"],[50,40,17,40],[50,42,17,41],[50,46,17,45],[50,47,17,46],[51,6,17,46,"_useState4"],[51,16,17,46],[51,23,17,46,"_slicedToArray"],[51,37,17,46],[51,38,17,46,"default"],[51,45,17,46],[51,47,17,46,"_useState3"],[51,57,17,46],[52,6,17,9,"loading"],[52,13,17,16],[52,16,17,16,"_useState4"],[52,26,17,16],[53,6,17,18,"setLoading"],[53,16,17,28],[53,19,17,28,"_useState4"],[53,29,17,28],[54,4,19,2],[54,8,19,2,"useEffect"],[54,14,19,11],[54,15,19,11,"useEffect"],[54,24,19,11],[54,26,19,12],[54,32,19,18],[55,6,19,18],[55,15,20,19,"loadOrCreateDeviceId"],[55,35,20,39,"loadOrCreateDeviceId"],[55,36,20,39],[56,8,20,39],[56,15,20,39,"_loadOrCreateDeviceId"],[56,36,20,39],[56,37,20,39,"apply"],[56,42,20,39],[56,49,20,39,"arguments"],[56,58,20,39],[57,6,20,39],[58,6,20,39],[58,15,20,39,"_loadOrCreateDeviceId"],[58,37,20,39],[59,8,20,39,"_loadOrCreateDeviceId"],[59,29,20,39],[59,36,20,39,"_asyncToGenerator"],[59,53,20,39],[59,54,20,39,"default"],[59,61,20,39],[59,63,20,4],[59,76,20,42],[60,10,21,6],[60,14,21,10],[61,12,22,8],[62,12,23,8],[62,16,23,14,"consent"],[62,23,23,21],[62,32,23,30,"SecureStore"],[62,43,23,41],[62,44,23,42,"getItemAsync"],[62,56,23,54],[62,57,23,55,"CONSENT_KEY"],[62,68,23,66],[62,69,23,67],[63,12,25,8],[63,16,25,12,"consent"],[63,23,25,19],[63,28,25,24],[63,34,25,30],[63,36,25,32],[64,14,26,10],[65,14,27,10,"setDeviceId"],[65,25,27,21],[65,26,27,22],[65,30,27,26],[65,31,27,27],[66,14,28,10,"setLoading"],[66,24,28,20],[66,25,28,21],[66,30,28,26],[66,31,28,27],[67,14,29,10],[68,12,30,8],[70,12,32,8],[71,12,33,8],[71,16,33,12,"id"],[71,18,33,14],[71,27,33,23,"SecureStore"],[71,38,33,34],[71,39,33,35,"getItemAsync"],[71,51,33,47],[71,52,33,48,"DEVICE_ID_KEY"],[71,65,33,61],[71,66,33,62],[72,12,35,8],[72,16,35,12],[72,17,35,13,"id"],[72,19,35,15],[72,21,35,17],[73,14,36,10,"id"],[73,16,36,12],[73,19,36,15,"generateUUID"],[73,31,36,27],[73,32,36,28],[73,33,36,29],[74,14,37,10],[74,20,37,16,"SecureStore"],[74,31,37,27],[74,32,37,28,"setItemAsync"],[74,44,37,40],[74,45,37,41,"DEVICE_ID_KEY"],[74,58,37,54],[74,60,37,56,"id"],[74,62,37,58],[74,63,37,59],[75,12,38,8],[76,12,40,8,"setDeviceId"],[76,23,40,19],[76,24,40,20,"id"],[76,26,40,22],[76,27,40,23],[77,10,41,6],[77,11,41,7],[77,12,41,8],[77,19,41,15,"error"],[77,24,41,20],[77,26,41,22],[78,12,42,8,"console"],[78,19,42,15],[78,20,42,16,"error"],[78,25,42,21],[78,26,42,22],[78,52,42,48],[78,54,42,50,"error"],[78,59,42,55],[78,60,42,56],[79,12,43,8],[80,12,44,8],[80,16,44,14,"consent"],[80,24,44,21],[80,33,44,30,"SecureStore"],[80,44,44,41],[80,45,44,42,"getItemAsync"],[80,57,44,54],[80,58,44,55,"CONSENT_KEY"],[80,69,44,66],[80,70,44,67],[81,12,45,8],[81,16,45,12,"consent"],[81,24,45,19],[81,29,45,24],[81,35,45,30],[81,37,45,32],[82,14,46,10,"setDeviceId"],[82,25,46,21],[82,26,46,22,"generateUUID"],[82,38,46,34],[82,39,46,35],[82,40,46,36],[82,41,46,37],[83,12,47,8],[84,10,48,6],[84,11,48,7],[84,20,48,16],[85,12,49,8,"setLoading"],[85,22,49,18],[85,23,49,19],[85,28,49,24],[85,29,49,25],[86,10,50,6],[87,8,51,4],[87,9,51,5],[88,8,51,5],[88,15,51,5,"_loadOrCreateDeviceId"],[88,36,51,5],[88,37,51,5,"apply"],[88,42,51,5],[88,49,51,5,"arguments"],[88,58,51,5],[89,6,51,5],[90,6,53,4,"loadOrCreateDeviceId"],[90,26,53,24],[90,27,53,25],[90,28,53,26],[91,4,54,2],[91,5,54,3],[91,7,54,5],[91,9,54,7],[91,10,54,8],[92,4,56,2],[92,11,56,9],[93,6,56,11,"deviceId"],[93,14,56,19],[94,6,56,21,"loading"],[95,4,56,29],[95,5,56,30],[96,2,57,0],[97,2,57,1,"_s"],[97,4,57,1],[97,5,15,24,"useDeviceId"],[97,16,15,35],[98,0,15,35],[98,3]],"functionMap":{"names":["<global>","generateUUID","xxxxxxxxXxxx4xxxYxxxXxxxxxxxxxxx.replace$argument_1","useDeviceId","useEffect$argument_0","loadOrCreateDeviceId"],"mappings":"AAA;ACM;iECC;GDI;CDC;eGE;YCI;ICC;KD+B;GDG;CHG"},"hasCjsExports":false},"type":"js/module"}]}